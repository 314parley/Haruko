/*!
 * meny+Mitsuba 1.3
 * http://lab.hakim.se/meny
 * MIT licensed
 *
 * Created by Hakim El Hattab (http://hakim.se, @hakimel)
 * Modified for Mitsuba by Desuneko (http://github.com/Desuneko)
 */
var Meny={create:function(e){return function(){function L(e){Meny.extend(s,e);A();O();M();_();D();P()}function A(){g="";E="";switch(s.position){case t:v="50% 0%";m="rotateX( 30deg ) translateY( -100% ) translateY( "+s.overlap+"px )";w="50% 0";S="translateY( "+s.height+"px ) rotateX( -15deg )";y={top:"-"+(s.height-s.overlap)+"px"};b={top:"0px"};x={top:"0px"};T={top:s.height+"px"};break;case n:v="100% 50%";m="rotateY( 30deg ) translateX( 100% ) translateX( -2px ) scale( 1.01 )";w="100% 50%";S="translateX( -"+s.width+"px ) rotateY( -15deg )";y={right:"-"+(s.width-s.overlap)+"px"};b={right:"0px"};x={left:"0px"};T={left:"-"+s.width+"px"};break;case r:v="50% 100%";m="rotateX( -30deg ) translateY( 100% ) translateY( -"+s.overlap+"px )";w="50% 100%";S="translateY( -"+s.height+"px ) rotateX( 15deg )";y={bottom:"-"+(s.height-s.overlap)+"px"};b={bottom:"0px"};x={top:"0px"};T={top:"-"+s.height+"px"};break;default:v="100% 50%";m="translateX( -100% ) translateX( "+s.overlap+"px ) scale( 1.01 ) rotateY( -30deg )";w="0 50%";S="translateX( "+s.width+"px ) rotateY( 15deg )";y={left:"-"+(s.width-s.overlap)+"px"};b={left:"0px"};x={left:"0px"};T={left:s.width+"px"};break}}function O(){Meny.addClass(o.wrapper,"meny-"+s.position);o.wrapper.style[Meny.prefix("perspective")]="800px";o.wrapper.style[Meny.prefix("perspectiveOrigin")]=w}function M(){if(o.cover){o.cover.parentNode.removeChild(o.cover)}o.cover=document.createElement("div");o.cover.style.position="absolute";o.cover.style.display="block";o.cover.style.width="100%";o.cover.style.height="100%";o.cover.style.left=0;o.cover.style.top=0;o.cover.style.zIndex=1e3;o.cover.style.visibility="hidden";o.cover.style.opacity=0;try{o.cover.style.background="rgba( 0, 0, 0, 0.4 )";o.cover.style.background="-ms-linear-gradient("+s.position+", rgba(0,0,0,0.20) 0%,rgba(0,0,0,0.65) 100%)";o.cover.style.background="-moz-linear-gradient("+s.position+", rgba(0,0,0,0.20) 0%,rgba(0,0,0,0.65) 100%)";o.cover.style.background="-webkit-linear-gradient("+s.position+", rgba(0,0,0,0.20) 0%,rgba(0,0,0,0.65) 100%)"}catch(e){}o.contents.appendChild(o.cover)}function _(){var e=o.menu.style;switch(s.position){case t:e.width="100%";e.height=s.height+"px";break;case n:e.right="0";e.width=s.width+"px";e.height="100%";break;case r:e.bottom="0";e.width="100%";e.height=s.height+"px";break;case i:e.width=s.width+"px";e.height="100%";break}e.position="fixed";e.display="block";e.zIndex=1;Meny.extend(e,y)}function D(){var e=o.contents.style;e.position=e.position.match(/relative|absolute|fixed/gi)?e.position:"relative";Meny.extend(e,x)}function P(){if("ontouchstart"in window){if(s.touch){Meny.bindEvent(document,"touchstart",q);Meny.bindEvent(document,"touchend",U)}else{Meny.unbindEvent(document,"touchstart",q);Meny.unbindEvent(document,"touchend",U)}}if(s.mouse){Meny.bindEvent(document,"mousedown",j);Meny.bindEvent(document,"mouseup",I);Meny.bindEvent(document,"mousemove",F)}else{Meny.unbindEvent(document,"mousedown",j);Meny.unbindEvent(document,"mouseup",I);Meny.unbindEvent(document,"mousemove",F)}}function H(){if(!p){p=true;Meny.addClass(o.wrapper,"meny-active");o.cover.style.height=o.contents.scrollHeight+"px";o.cover.style.visibility="visible";N&&N.stop();N=Meny.animate(o.menu,b,500);C&&C.stop();C=Meny.animate(o.contents,T,500);k&&k.stop();k=Meny.animate(o.cover,{opacity:1},500);Meny.dispatchEvent(o.menu,"open")}}function B(){if(p){p=false;Meny.removeClass(o.wrapper,"meny-active");N&&N.stop();N=Meny.animate(o.menu,y,500);C&&C.stop();C=Meny.animate(o.contents,x,500);k&&k.stop();k=Meny.animate(o.cover,{opacity:0},500,function(){o.cover.style.visibility="hidden"});Meny.dispatchEvent(o.menu,"close")}}function j(e){d=true}function F(e){if(!d){var f=e.clientX-u,l=e.clientY-a;switch(s.position){case t:if(l>s.height){B()}else if(l<s.threshold){H()}break;case n:var c=o.wrapper.offsetWidth;if(f<c-s.width){B()}else if(f>c-s.threshold){H()}break;case r:var h=o.wrapper.offsetHeight;if(l<h-s.height){B()}else if(l>h-s.threshold){H()}break;case i:if(f>s.width){B()}else if(f<s.threshold){H()}break}}}function I(e){d=false}function q(e){f=e.touches[0].clientX-u;l=e.touches[0].clientY-a;c=null;h=null;Meny.bindEvent(document,"touchmove",R)}function R(e){c=e.touches[0].clientX-u;h=e.touches[0].clientY-a;var t=null;if(Math.abs(c-f)>Math.abs(h-l)){if(c<f-s.threshold){t=X}else if(c>f+s.threshold){t=W}}else{if(h<l-s.threshold){t=$}else if(h>l+s.threshold){t=V}}if(t&&t()){e.preventDefault()}}function U(e){Meny.unbindEvent(document,"touchmove",R);if(c===null&&h===null){z()}}function z(){var e=s.position===t&&l>s.height||s.position===n&&f<o.wrapper.offsetWidth-s.width||s.position===r&&l<o.wrapper.offsetHeight-s.height||s.position===i&&f>s.width;if(e){B()}}function W(){if(s.position===n&&p){B();return true}else if(s.position===i&&!p){H();return true}}function X(){if(s.position===n&&!p){H();return true}else if(s.position===i&&p){B();return true}}function V(){if(s.position===r&&p){B();return true}else if(s.position===t&&!p){H();return true}}function $(){if(s.position===r&&!p){H();return true}else if(s.position===t&&p){B();return true}}if(!e||!e.menuElement||!e.contentsElement){throw"You need to specify which menu and contents elements to use."}if(e.menuElement.parentNode!==e.contentsElement.parentNode){throw"The menu and contents elements must have the same parent."}var t="top",n="right",r="bottom",i="left";var s={width:300,height:300,position:i,threshold:40,overlap:6,transitionDuration:"0.5s",transitionEasing:"ease",mouse:true,touch:true};var o={menu:e.menuElement,contents:e.contentsElement,wrapper:e.menuElement.parentNode,cover:null};var u=o.wrapper.offsetLeft,a=o.wrapper.offsetTop,f=null,l=null,c=null,h=null,p=false,d=false;var v,m,g,y,b,w,E,S,x,T;var N,C,k;L(e);return{configure:L,open:H,close:B,isOpen:function(){return p},addEventListener:function(e,t){o.menu&&Meny.bindEvent(o.menu,e,t)},removeEventListener:function(e,t){o.menu&&Meny.unbindEvent(o.menu,e,t)}}}()},animate:function(e,t,n,r){return function(){function a(){var t=1-Math.pow(1-(Date.now()-o)/n,5);for(var s in i){var l=i[s];e.style[s]=l.start+(l.end-l.start)*t+l.unit}if(t<1){u=setTimeout(a,1e3/60)}else{r&&r();f()}}function f(){clearTimeout(u)}var i={};for(var s in t){i[s]={start:parseFloat(e.style[s])||0,end:parseFloat(t[s]),unit:typeof t[s]==="string"&&t[s].match(/px|em|%/gi)?t[s].match(/px|em|%/gi)[0]:""}}var o=Date.now(),u;a();return{stop:f}}()},extend:function(e,t){for(var n in t){e[n]=t[n]}},prefix:function(e,t){var n=e.slice(0,1).toUpperCase()+e.slice(1),r=["Webkit","Moz","O","ms"];for(var i=0,s=r.length;i<s;i++){var o=r[i];if(typeof (t||document.body).style[o+n]!=="undefined"){return o+n}}return e},addClass:function(e,t){e.className=e.className.replace(/\s+$/gi,"")+" "+t},removeClass:function(e,t){e.className=e.className.replace(t,"")},bindEvent:function(e,t,n){if(e.addEventListener){e.addEventListener(t,n,false)}else{e.attachEvent("on"+t,n)}},unbindEvent:function(e,t,n){if(e.removeEventListener){e.removeEventListener(t,n,false)}else{e.detachEvent("on"+t,n)}},dispatchEvent:function(e,t,n){if(e){var r=document.createEvent("HTMLEvents",1,2);r.initEvent(t,true,true);Meny.extend(r,n);e.dispatchEvent(r)}},getQuery:function(){var e={};location.search.replace(/[A-Z0-9]+?=([\w|:|\/\.]*)/gi,function(t){e[t.split("=").shift()]=t.split("=").pop()});return e}};if(typeof Date.now!=="function")Date.now=function(){return(new Date).getTime()}